@{
    ViewData["Title"] = "Home Page";
}

<link href="~/css/Index_page.css" rel="stylesheet" />

<div id="myCarousel" class="carousel slide" data-ride="carousel" data-interval="6000">
    <ol class="carousel-indicators">
        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
        <li data-target="#myCarousel" data-slide-to="1"></li>
        <li data-target="#myCarousel" data-slide-to="2"></li>
    </ol>
    <div class="carousel-inner" role="listbox">
        <div class="item active">
            <img src="~/images/banner_1.svg" alt="Restaurants Info" class="img-responsive" />
            <div class="carousel-caption" role="option">
                <p>
                    See Restaurants Info.
                    <a class="btn btn-default" href="Home/About">
                        See More
                    </a>
                </p>
            </div>
        </div>
        <div class="item">
            <img src="~/images/banner_2.svg" alt="Convert" class="img-responsive" />
            <div class="carousel-caption" role="option">
                <p>
                    Convert your pdf menu
                    <a class="btn btn-default" href="">
                        Convert
                    </a>
                </p>
            </div>
        </div>
        <div class="item">
            <img src="~/images/banner_3.svg" alt="Our statistics" class="img-responsive" />
            <div class="carousel-caption" role="option">
                <p>
                    See our statistics
                    <a class="btn btn-default" href="Home/About">
                        See More
                    </a>
                </p>
            </div>
        </div>
    </div>
    <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div>

<div class="row">
    <div class="col-md-3">
        <h2>Application Uses </h2>
        <ul>
            <li>ASP.NET Core MVC</li>
            <li>IronPython</li>
        </ul>
    </div>
    <div class="col-md-3">
        <h2>How to</h2>
        <ul>
            <li><a href="">Convert pdf menu</a></li>
            <li><a href="">Select template manual</a></li>
            <li><a href="">Add comment.</a></li>
        </ul>
    </div>
    <div class="col-md-3">
        <h2>Overview</h2>
        <ul>
            <li><a href="Home/About">Current Restaurants</a></li>
            <li><a href="Home/About">Current Restaurants Menus</a></li>
            <li><a href="Home/About">Menu items statistics</a></li>
            <li><a href="Home/About">Restaurants statistics</a></li>
        </ul>
    </div>
    <div class="col-md-3">
        <h2>Run</h2>
        <ul>
            <li><a href="">Run tool for converting pdf menu</a></li>
            <li><a href="">Save a template for menu</a></li>
        </ul>
    </div>
</div>

<div class="row">
    <form asp-controller="Home" asp-action="UploadFile" method="post"
          enctype="multipart/form-data">
        <div>
            <label for="image_uploads">Choose menu to upload (PDF ONLY)</label>
            <input type="file" id="image_uploads" name="file" accept=".pdf">
        </div>
        <div class="preview">
            <p id="file_choose">No files currently selected for upload</p>
        </div>
        <div>
            <button type="submit">Submit</button>
        </div>
    </form>
</div>



<script>
    var input = document.querySelector('input');
    var preview = document.querySelector('.preview');

    input.style.opacity = 0; input.addEventListener('change', updateImageDisplay); function updateImageDisplay() {
        while (preview.firstChild) {
            preview.removeChild(preview.firstChild);
        }

        var curFiles = input.files;
        if (curFiles.length === 0) {
            var para = document.createElement('p');
            para.textContent = 'No files currently selected for upload';
            preview.appendChild(para);
        } else {
            var list = document.createElement('ol');
            preview.appendChild(list);
            for (var i = 0; i < curFiles.length; i++) {
                var listItem = document.createElement('li');
                var para = document.createElement('p');
                //if (validFileType(curFiles[i])) {
                //    para.textContent = 'File name ' + curFiles[i].name + ', file size ' + returnFileSize(curFiles[i].size) + '.';
                //    var image = document.createElement('iframe ');
                //    //image.src = window.URL.createObjectURL(curFiles[i]);
                //    image.src = 'https://docs.google.com/gview?url=' + window.URL.createObjectURL(curFiles[i]) +'&embedded=true'

                //    listItem.appendChild(image);
                //    listItem.appendChild(para);

                //} else {
                //    para.textContent = 'File name ' + curFiles[i].name + ': Not a valid file type. Update your selection.';
                //    listItem.appendChild(para);
                //}
                para.textContent = 'File name ' + curFiles[i].name + ', file size ' + returnFileSize(curFiles[i].size) + '.';
                var a = document.createElement('a');
                var linkText = document.createTextNode("my title text");
                a.appendChild(linkText);
                a.title = "my title text";
                a.href = "Home/GetReport";                       
                document.body.appendChild(a);

                list.appendChild(listItem);
                listItem.appendChild(a);
                listItem.appendChild(para);
            }
        }
    } var fileTypes = [
        'image/jpeg',
        'image/jpeg',
        'image/pdf',
        'image/png'
    ]

    function validFileType(file) {
        for (var i = 0; i < fileTypes.length; i++) {
            //if (file.type === fileTypes[i]) {
            //    return true;
            //}
            return true;
        }

        return false; iframe 
    } function returnFileSize(number) {
        if (number < 1024) {
            return number + 'bytes';
        } else if (number > 1024 && number < 1048576) {
            return (number / 1024).toFixed(1) + 'KB';
        } else if (number > 1048576) {
            return (number / 1048576).toFixed(1) + 'MB';
        }
    }
</script>


